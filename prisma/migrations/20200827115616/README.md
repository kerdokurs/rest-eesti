# Migration `20200827115616`

This migration has been generated by Kerdo at 8/27/2020, 2:56:16 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Maakond" (
"id_" SERIAL,
"id" text   NOT NULL ,
"nimi" text   NOT NULL ,
"pindala" integer   NOT NULL ,
"rahvaarv" integer   NOT NULL ,
"linnId_" integer   NOT NULL ,
PRIMARY KEY ("id_")
)

CREATE TABLE "public"."Linn" (
"id_" SERIAL,
"id" text   NOT NULL ,
"nimi" text   NOT NULL ,
"rahvaarv" integer   NOT NULL ,
PRIMARY KEY ("id_")
)

CREATE UNIQUE INDEX "Maakond.id_unique" ON "public"."Maakond"("id")

CREATE UNIQUE INDEX "Maakond.nimi_unique" ON "public"."Maakond"("nimi")

CREATE UNIQUE INDEX "Linn.id_unique" ON "public"."Linn"("id")

ALTER TABLE "public"."Maakond" ADD FOREIGN KEY ("linnId_")REFERENCES "public"."Linn"("id_") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200827115616
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,28 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Maakond {
+  id_ Int @default(autoincrement()) @id
+
+  id       String @unique
+  nimi     String @unique
+  keskus   Linn   @relation(fields: [linnId_], references: [id_])
+  pindala  Int
+  rahvaarv Int
+  linnId_  Int
+}
+
+model Linn {
+  id_ Int @default(autoincrement()) @id
+
+  id       String    @unique
+  nimi     String
+  rahvaarv Int
+  Maakond  Maakond[]
+}
```


